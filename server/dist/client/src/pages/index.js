import { signIn, signOut, useSession } from "next-auth/react";
import Head from "next/head";
import { getServerAuthSession } from "../server/common/get-server-auth-session";
const Home = () => {
    const { data: sessionData } = useSession();
    return (<>
      <Head>
        <title>Create T3 App</title>
        <meta name="description" content="Generated by create-t3-app"/>
        <link rel="icon" href="/favicon.ico"/>
      </Head>
      <main className="flex min-h-screen flex-col items-center justify-center bg-gradient-to-b from-[#2e026d] to-[#15162c]">
        <div className="rounded-full bg-white/10 px-10 py-3 font-semibold text-white no-underline">
          {sessionData ? <p>Logged in</p> : <p>Not logged in</p>}
        </div>
        <button className="rounded-full bg-white/10 px-10 py-3 font-semibold text-white no-underline transition hover:bg-white/20" onClick={sessionData ? () => signOut() : () => signIn()}>
          {sessionData ? "Sign out" : "Sign in"}
        </button>
      </main>
    </>);
};
export default Home;
export const getServerSideProps = async (ctx) => {
    const session = await getServerAuthSession(ctx);
    console.log("session", session);
    if (!session) {
        return {
            redirect: {
                destination: "/login",
                permanent: false,
            },
            props: {},
        };
    }
    return {
        props: {
            session,
        },
    };
};
